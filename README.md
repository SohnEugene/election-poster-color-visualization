# 선거 벽보, 색으로 풀어봤다!
(프로젝트 소개)  
(윅스 링크)
<br/>
<br/>
<br/>

## 팀 소개: 서울대학교 RGB(Real Gradient Breakdown)
2024-1 연합전공 정보문화학의 비주얼라이제이션 수업을 통해 구성된 팀입니다.
<br/>
- 명찬호
  - 지리학과
- 손유진
  - 자유전공학부 21학번 
  - 이메일: qeugene@snu.ac.kr
- 신승주
  - 인류학과
- 장한이
  - 건설환경공학부
- 정해인
  - 자유전공학부
<br/>
<br/>


## 1. 데이터 수집
[중앙선거관리위원회의 도서관 사이트](https://library.nec.go.kr/neweps/main.do)에 아카이빙된 선거자료 > 후보자선전물 자료를 활용했다.
<br/>
위 사이트에서는 역대 모든 선거 후보자들의 선거 벽보와 공보 pdf 파일을 열람, 다운로드할 수 있다. 
<br/>
<br/>
<img width="600" alt="image" src="https://github.com/user-attachments/assets/514957ff-bf2b-4ba3-81cc-7e6652c1b37b">
<br/>
<br/>
위 pdf 파일을 Python을 통해 스크래핑하여 구글 드라이브에 저장하였다.
환경은 Google Colab, requests와 Beautiful Soup 패키지를 사용하였다. 
선거 종류에 따라 검색 링크가 달라지기에 각각의 링크를 가져와 선거 대수와 페이지 숫자를 포매팅하여 사용했다. 
전체 코드는 이 리포지토리의 [data_scraping.ipynb](https://github.com/SohnEugene/election-poster-color-visualization/blob/main/%E1%84%8F%E1%85%B3%E1%84%85%E1%85%A9%E1%86%AF%E1%84%85%E1%85%B5%E1%86%BC.ipynb) 파일에서 확인할 수 있다.
<br/>
<br/>
원래 계획은 한창 프로젝트 진행 당시 치러진 22대 총선까지를 프로젝트에 포함시키는 것이었다.
선거 기간에는 선관위 홈페이지에 정책공약 마당에서 모든 후보의 공보물을 확인할 수 있었기에 벽보와 상당히 유사한 공보물 표지를 사용할 계획이었다.
다음은 선관위 도서관 사이트에서 가져온 21대 총선 서울 관악구 을 선거구에 출마하여 당선된 더불어민주당 정태호 후보자의 공보물 첫 페이지(좌)와 벽보(우)의 이미지이다. 유사성을 확인할 수 있다.

<img width="300" alt="image" src="https://github.com/user-attachments/assets/c6234f1c-4dcf-44e1-ad71-1d40afdbbca7">
<img width="300" alt="image" src="https://github.com/user-attachments/assets/30a09aee-fac9-409e-9a9f-eddb54b1cdd4">

<br/>
<br/>
그러나 선거 다음날 바로 선관위 정책공약마당에서 낙선한 후보자들의 공보물이 내려갔기에 계획이 무산되었다.
선관위에 문의한 결과, 위 공보물들은 개인정보 보호를 위해 내려갔으며 선관위 도서관 홈페이지에 아카이빙되기까지는 2-3개월이 소요된다는 답변을 받았으나, 
같은 해 10월까지 선관위 도서관 사이트에 22대 총선 후보자선전물이 게시되지 않았기에 어쩔 수 없이 선관위 도서관 사이트에서 접근 가능한 2022년 진행된 8회 지선까지의 데이터를 가지고 프로젝트를 진행하였다.
<br/>
<br/>
<br/>


## 2. 데이터 전처리
### JPG 파일로의 변환
벽보 이미지에서 대표색을 추출하기 위해 pdf 파일을 jpg 파일로 변환했다. PIL, pdf2image 패키지를 사용했으며 전체 코드는 [pdf_to_jpg.ipynb]()에서 확인할 수 있다.
<br/>
<br/>
### 이미지 리사이즈
다음에 나올 인물 마스킹을 하는 과정에서, 시간이 지나치게 많이 소요되며 작은 사이즈의 이미지로 테스트했을 때보다 결과가 안 좋게 나오는 것을 확인했다. pdf 파일에서 바로 변환된 jpg 파일의 경우 사이즈가 대략 3000x4000 이였기에 사이즈가 1MB가 넘는 데이터도 다수 있었다. 따라서 이 문제를 해결하기 위해 width = 1000으로 통일하여 리사이즈, 400KB 정도의 파일을 분석에 활용하였다. 코드는 [resizing.ipynb]()에서 확인할 수 있다.
<br/>
<br/>
### 인물 마스킹
프로젝트 계획 단계에서 가장 큰 우려 중 하나는 대표색이 제대로 추출되지 않을 가능성이였다.
아무런 마스킹 처리가 되지 않은 이미지에서 대표색을 추출할 경우, 얼굴에서 추출된 살구색이나 머리와 옷에서 추출된 검정색이 대표색으로 추출될 것이라고 예상했다.
우리가 알고 싶었던 것은 모든 벽보에 공통적으로 들어가 있는 사람의 얼굴 이외의 다른 요소에 어떤 색이 얼마나 활용되었는지였기에 후보자를 마스킹처리하여 대표색 추출 시 포함되지 않도록 하였다.
위와 같은 과정을 거치면 후보자가 입고 있는 옷이나 넥타이의 색깔이 누락되기에 필요한 색 정보가 소실된다는 우려가 있었지만, 이에 해당하는 사례가 비교적 적었기에 일괄적으로 마스킹 처리를 하기로 결정하였다.

인물 인식을 위해 구글에서 제공하는 deepLab 모델의 semantic segmentation 기능을 사용하였다.

디테일한 코드 구현은 [링크](https://meissa.tistory.com/37)를 참조했다.
다음은 올해 4월 치러진 22대 총선, 관악구 갑, 을 선거구에 출마한 더불어민주당과 국민의힘 4명의 후보에 대해서 테스트로 인물 마스킹을 적용한 결과이다.
<br/>
<br/>
![Frame 1](https://github.com/user-attachments/assets/5836551e-07a5-438d-9435-3c37ab3f0676)
<br/>
<br/>
인물과 텍스트 영역이 깔끔하게 구분되지 않은 





## 3. 대표색 추출
## 4. 시각화
## 기타
## 참고 자료
